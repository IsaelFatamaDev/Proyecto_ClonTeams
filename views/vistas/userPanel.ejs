<!DOCTYPE html>
<html lang="en">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="/css/style.css">
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
     <link rel="stylesheet" href="/css/user.css" />
     <link rel="stylesheet" href="/css/categorias.css" />
     <link rel="shortcut icon" href="/img/Icono.png" type="image/x-icon">
     <!-- Google Fonts Link For Icons -->
     <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
     <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,1,0" />
     <title>Panel Usuario</title>
     <style>
          .btn {
               display: inline-block;
               padding: 0.9rem 1.9rem;
               color: #fff !important;
               background-color: #64bcf4;
               border-radius: 16px;
               text-transform: capitalize;
               transition: 0.3s;
               border: none;
               cursor: pointer;
               margin-top: 10px;
          }

          .btn:hover {
               background-color: #4589ff;
          }

          .card {
               margin-top: 20px;
               background: #fff;
               border-radius: 10px;
               box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
               overflow: hidden;
          }

          .card-header {
               background: #64bcf4;
               color: #fff;
               padding: 15px;
               font-size: 1.2em;
               font-weight: bold;
               text-align: center;
          }

          .card-body {
               padding: 20px;
          }

          .card-body canvas {
               max-width: 100%;
               height: auto;
          }

          .categoria--title {
               text-align: center;
               margin-bottom: 20px;
          }
     </style>
</head>

<body>
     <main class="main--content">
          <div class="header--wrapper">
               <div class="header--title">
                    <span>Proyectos</span>
                    <h2>Bienvenido <%= userData.nombres %>
                    </h2>
               </div>
               <form action="/logout" method="post">
                    <button type="submit" class="btn">Regresar</button>
               </form>
          </div>
          <hr>
          <div class="categoria--title">
               <h2>
                    Bienvenido: <%= userData.nombres %>
               </h2>
               <p>Cantidad de proyectos: <%= cantidadProyectos %>
               </p>
          </div>

          <div class="card">
               <div class="card-header">
                    <a href="/gestionProyectos/<%= userData.nombres %>">Gestionar Proyectos</a>
               </div>
          </div>
          <!-- Tarjeta para mostrar proyectos subidos con Chart.js -->
          <div class="card">
               <div class="card-header">
                    Proyectos Subidos (con Chart.js)
               </div>
               <div class="card-body">
                    <!-- Agrega aquí el canvas para el gráfico de Chart.js -->
                    <canvas id="proyectos-chart" width="400" height="200"></canvas>
               </div>
          </div>
     </main>
     <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
     <script>
          const cantidadProyectos = <%= cantidadProyectos %>;
          const proyectosChart = new Chart(document.getElementById('proyectos-chart'), {
               type: 'bar',
               data: {
                    labels: ['Proyectos'],
                    datasets: [{
                         label: 'Cantidad de Proyectos',
                         data: [cantidadProyectos],
                         backgroundColor: 'rgba(255, 99, 132, 0.6)'
                    }]
               },
               options: {
                    scales: {
                         y: {
                              beginAtZero: true,
                              precision: 0
                         }
                    }
               }
          });
     </script>
</body>

</html>